<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planeja SJC</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='images/l1.png') }}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat|Poppins">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">

    <style>
        body {
            font-family: 'Montserrat', sans-serif;
        }

        /* --- ESTILOS NOVOS DO MENU (Copiados da página Gráficos) --- */

        /* 1. Botão Mobile Customizado */
        #btnMenuMobile {
            display: none;
            /* Escondido no Desktop */
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.5);
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
        }

        /* 2. Ícone SVG (Os três riscos brancos) */
        .toggler-icon {
            width: 30px;
            height: 30px;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='30' height='30' viewBox='0 0 30 30'%3e%3cpath stroke='rgba%28255, 255, 255, 1%29' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: center;
        }

        /* 3. Container do Menu Mobile (Animação Slide) */
        #menuMobile {
            display: block;
            width: 100%;
            overflow: hidden;
            max-height: 0;
            /* Começa fechado */
            opacity: 0;
            transition: max-height 0.5s ease-in-out, opacity 0.4s ease-in-out;
            background-color: #043e79;
            /* Mesma cor da navbar */
            text-align: center;
        }

        #menuMobile.open {
            max-height: 300px;
            /* Altura quando aberto */
            opacity: 1;
            padding: 15px 0;
            margin-top: 10px;
        }

        .mobile-link {
            display: block;
            color: white;
            padding: 10px;
            font-size: 18px;
            text-decoration: none;
            font-weight: bold;
        }

        .mobile-link:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            text-decoration: none;
        }

        /* 4. Controle de Visibilidade (Media Queries) */
        /* No Desktop (telas grandes), mostra o menu padrão do Bootstrap e esconde o nosso botão */
        @media (min-width: 992px) {
            #menuDesktop {
                display: flex !important;
            }

            #btnMenuMobile {
                display: none !important;
            }

            #menuMobile {
                display: none !important;
            }
        }

        /* No Mobile (telas pequenas), esconde o menu desktop e mostra o botão */
        @media (max-width: 991px) {
            #menuDesktop {
                display: none !important;
            }

            #btnMenuMobile {
                display: block !important;
            }
        }

        /* --- ESTILOS ORIGINAIS DA HOME --- */
        .custom-select {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("{{ url_for('static', filename='images/seta.svg') }}");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1.5em 1.5em;
        }

        @media (min-width: 576px) {
            .modal-dialog-chart {
                max-width: 1140px;
            }
        }

        .modal-body .chart-container {
            height: 70vh;
        }
    </style>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark" style="background-color: #152887; flex-wrap: wrap;">
        <div class="container-fluid">

            <a class="navbar-brand" href="{{ url_for('index') }}">
                <img src="{{ url_for('static', filename='images/l6.png') }}" alt="Logo Censo 2022"
                    style="height: 55px;">
            </a>

            <button id="btnMenuMobile" type="button">
                <div class="toggler-icon"></div>
            </button>

            <div class="collapse navbar-collapse" id="menuDesktop">
                <ul class="navbar-nav ml-auto mb-2 mb-lg-0" style="font-size: 18px;">
                    <li class="nav-item">
                        <a class="nav-link navbar-link" href="{{ url_for('graficos') }}">Gráficos</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link navbar-link" href="{{ url_for('sobre') }}">Sobre</a>
                    </li>
                </ul>
            </div>
        </div>

        <div id="menuMobile">
            <a class="mobile-link" href="{{ url_for('graficos') }}">Gráficos</a>
            <a class="mobile-link" href="{{ url_for('sobre') }}">Sobre</a>
        </div>
    </nav>

     <main>
            <section class="imagem-cidade p-3">
                <div class="container-foto">
                    <img src="{{ url_for('static', filename='images/cidade1_jpg.jpeg') }}" alt="Foto Cidade">
                </div>
            </section>

            <section class="introducao text-center " style="background-color:#152887;">
                <h2 id="titulo-sumario">Como Explorar Nossos Gráficos?</h2>
                <p class="mx-auto text-2xl max-w-[800px]">
                    Estes painéis oferecem uma visão geral dos dados, permitindo explorar informações de forma prática.
                    Para ver cada análise detalhada, basta clicar nos botões que abrem os gráficos em seus modais.
                    Utilize os filtros para ajustar período e categorias — as visualizações serão atualizadas automaticamente
                    conforme suas escolhas.
                </p>
            </section>

            <!--Sumário-->
            <section class="sumario text-center mb-5">
                <h2 id="titulo-sumario"> Visão Geral dos Temas</h2>
                <nav class="navegacao">
                    <a href="#escolaridade"> Escolaridade </a>
                    <a href="#longevidade"> Longevidade </a>
                    <a href="#regiaooeste"> Região Oeste</a>
                </nav>
            </section>

            <!--Gráficos principais-->
            <section id="escolaridade" class="mb-5">
                <h2>Escolaridade</h2>
                <div class="flex-container">
                    <div class="chart-container">
                        <img src="{{ url_for('static', filename='images/escola.jpg') }}" alt="Foto Escola">
                    </div>
                    <div class="texto-e-botao-container">
                        <p> Escolaridade refere-se ao nível de instrução formal que uma pessoa alcançou, como ensino
                            fundamental, médio,superior ou pós-graduação. Ela indica o percurso educacional de um
                            indivíduo e ajuda a compreender seu grau de formação e conhecimento acadêmico.</p>
                        <button class="button" data-toggle="modal" data-target="#myModal1" style="vertical-align:middle">
                            <span> Ver mais</span>
                        </button>
                    </div>
                </div>
            </section>

            <div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="modalTitle1"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-dialog-chart" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="modalTitle1">Mais Informações</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <p>Este painel apresenta uma visão geral dos níveis de escolaridade dos participantes,
                            permitindo filtrar e explorar os diferentes grupos conforme a necessidade.</p>
                            <div class="chart-container mb-3">
                                <iframe id="chart3-modal" src=""></iframe>
                            </div>
                            <p>Aqui é possível comparar diferentes categorias entre si. 
                            As barras mais altas indicam maior representatividade dentro do intervalo filtrado.</p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                        </div>
                    </div>
                </div>
            </div>

            <section id="longevidade" class="mb-5">
                <h2>Longevidade</h2>
                <div class="flex-container">
                    <div class="chart-container">
                        <img src="{{ url_for('static', filename='images/idosos.jpg') }}" alt="Foto Idosos">
                    </div>
                    <div class="texto-e-botao-container">
                        <p> Envelhecimento refere-se ao aumento da proporção de pessoas idosas na população ao longo do tempo,
                            indicando mudanças na estrutura etária e revelando tendências importantes sobre longevidade e demandas
                            sociais</p>
                        <button class="button" data-toggle="modal" data-target="#myModal2" style="vertical-align:middle">
                            <span> Ver mais</span>
                        </button>
                    </div>
                </div>
            </section>

            <div class="modal fade" id="myModal2" tabindex="-1" role="dialog" aria-labelledby="modalTitle2"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-dialog-chart" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="modalTitle2">Mais Informações</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="chart-container mb-3">
                                <p>A longevidade em SJC tem aumentado, refletindo melhores condições de vida e saúde.
                                    A população vive mais e envelhece de forma contínua, mostrando um avanço no bem-estar do município.
                                </p>
                                    <iframe id="chart4-modal" src=""></iframe>
                                </div>
                                <p>O gráfico de faixa etária mostra como a população se distribui entre jovens, adultos e idosos.
                                    Ele revela quais grupos são mais numerosos e ajuda a entender o perfil demográfico da cidade.
                                </p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                        </div>
                    </div>
                </div>
            </div>

            <section id="regiaooeste" class="mb-5">
                <h2>Região Oeste</h2>
                <div class="flex-container">
                    <div class="chart-container">
                        <img src="{{ url_for('static', filename='images/oeste2.jpg') }}" alt="Foto Regiao Oeste">
                    </div>
                    <div class="texto-e-botao-container">
                        <p> A região Oeste de São José dos Campos caracteriza-se por ser uma área em expansão urbana,
                            com bairros residenciais consolidados e crescente oferta de serviços, comércio e infraestrutura.
                            É uma das regiões mais dinâmicas da cidade, marcada por desenvolvimento contínuo e aumento populacional</p>
                        <button class="button" data-toggle="modal" data-target="#myModal3" style="vertical-align:middle">
                            <span> Ver mais</span>
                        </button>
                    </div>
                </div>
            </section>

            <div class="modal fade" id="myModal3" tabindex="-1" role="dialog" aria-labelledby="modalTitle3"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-dialog-chart" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="modalTitle3">Mais Informações</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                                <p>A região Oeste de SJC é uma área em forte expansão, com bairros consolidados e crescente oferta
                                    de serviços. Destaca-se pelo desenvolvimento urbano contínuo e pelo aumento da população residente.
                                </p>
                                <div class="chart-container mb-3">
                                    <iframe id="chart2-modal" src=""></iframe>
                                </div>
                                <p>O gráfico de barras destaca as diferenças entre os bairros da região Oeste, facilitando a
                                    comparação de indicadores. Ele evidencia quais áreas se destacam e onde há maior concentração
                                    populacional ou de serviços.
                                </p>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

    <footer>
            <div style="width: 32px;"> </div>
                <span>© 2025 Omnidevs, Todos os direitos reservados &copy;</span>
                <div class="icons">
                    <a href="https://github.com/OmniDevsOficial/API-Censo-2022/tree/main" target="_blank" class="menu-link">
                        <img src="{{ url_for('static', filename='images/github.png') }}" alt="Link para o GitHub do projeto"
                            style="width: 32px; height: auto; display: block; filter: brightness(0) invert(1);">
                    </a>
                </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- LÓGICA DO SEU NOVO BOTÃO TOGGLE ---
            const btn = document.getElementById('btnMenuMobile');
            const menu = document.getElementById('menuMobile');

            if (btn && menu) {
                btn.addEventListener('click', () => {
                    menu.classList.toggle('open');
                });
            }

            // --- SEU CÓDIGO DE GRÁFICOS ORIGINAL ---
            // (Mantive exatamente o mesmo comportamento para carregar os gráficos)
            const regionData = {
                'sjc': {
                    name: 'São José dos Campos',
                    charts: [
                        { id: 'chart1', title: 'Pirâmide Etária 2010', tipo: 'piramide_2010' },
                        { id: 'chart3', title: 'População por Região', tipo: 'populacao' },
                        { id: 'chart2', title: 'Pirâmide Etária 2022', tipo: 'piramide_2022' },
                        { id: 'chart4', title: 'Taxa de Crescimento', tipo: 'taxa_crescimento' }
                    ]
                }
            };

            function updateDashboard(regionKey) {
                const data = regionData[regionKey];
                if (!data) return;

                data.charts.forEach(chart => {
                    const iframeMain = document.getElementById(chart.id + '-main');
                    const iframeModal = document.getElementById(chart.id + '-modal');
                    let newSrc = chart.tipo ? `/grafico/${regionKey}/${chart.tipo}` : '';

                    if (iframeMain) iframeMain.src = newSrc;
                    if (iframeModal) iframeModal.src = newSrc;
                });
            }

            updateDashboard('sjc');
        });
    </script>

</body>

</html>